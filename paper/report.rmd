---
title: "Development of an automatic tool for periodic surveillance of actuarial and demographic indicators"
author: "Daniel Alonso, María Luz Durbán Reguera, Bernardo D'Auria"
date: "July-August 2021"
header-includes:
    - \usepackage{setspace}\doublespacing
output: 
    pdf_document:
        latex_engine: xelatex
        toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "./figures/"
)
```

\newpage

# Abstract

As a result of the COVID-19 pandemic and its large impact across Spain, the monitoring of demographic measures as a direct result of deaths related to such pandemic and future similarly deadly events has become increasingly important. It is intended with this project to develop a tool in order to easily monitor a selection of demographic measures relating to collective deaths of individuals as a result of relevant worldwide events like the one mentioned previously. The tool consists of a shiny dashboard (developed in R) where such measures are displayed in different visualizations across time.

# Introduction

The COVID-19 pandemic has led to a widespread and noticeable temporary increase in mortality and reduction in life expectancy throughout Spain. This arises a need to monitor these demographic measures more closely and in real time. 

This project consists of a shiny dashboard with several features:

- Visualizing several mortality metrics:
    - Excess mortality
    - Cumulative mortality rate
    - Cumulative relative mortality rate
    - Mortality improvement factor

- Visualizing life expectancy and constructing life tables

- Visualizing a map of Spain with the previous metrics per autonomous community (CCAA)

All metrics are calculated weekly with data stretching back as far back as 2010.

# Objectives

- Provide a simple-to-use, web-based, OS-agnostic tool to compute and visualize common mortality and life expectancy metrics in time series plots/maps

- Provide the user the ability to customize the plot parameters significantly

- Provide the user the ability to download the plots and the data (with or without filtering)

- Allow the user to update and push the data to the corresponding github repository hosting the data from within the application

- Have data updated in real-time from the official Spanish sources and Eurostat (also provided by INE)

# What problem does the application solve?

As we saw during the COVID-19 pandemic, the most widely publicized measures shown to the public in order to explain the status of the pandemic and the country as a whole were always related to incidence of the virus and death counts/recovery counts.

# Project repository tree structure

First of all, the project consists of two repositories and their respectives **subfolders**/*files*:

- [**The main project repository** (*tfm_uc3m*)](https://github.com/dreth/tfm_uc3m)
    - **api**
        - **logs**
            - *earliest_eurostat_provisional.log*
            - *last_eurostat_update.log*
            - *last_ine_update.log*
        - *dbs_check.py*
        - *function.py*
        - *query.py*
        - *update_database.sh*
    - **dashboard**
    - **data**
    - **docker**
    - **docs**
    - **paper**
    - *README.md*

- [**The data repository** (*tfm_uc3m_data*)](https://github.com/dreth/tfm_c3m_data)
    - **ccaa_guide**
        - *guide_ccaa.json*
        - *guide_ccaa.txt*
        - *guide_ccaa_python_dict.p*

